(this.webpackJsonpminiproject=this.webpackJsonpminiproject||[]).push([[0],{214:function(e,t,n){},231:function(e,t){},234:function(e,t){},237:function(e,t){},241:function(e,t){},242:function(e,t){},268:function(e,t){},270:function(e,t){},284:function(e,t){},286:function(e,t){},300:function(e,t){},316:function(e,t){},318:function(e,t){},332:function(e,t){},333:function(e,t){},408:function(e,t){},409:function(e,t){},512:function(e,t,n){},518:function(e,t,n){"use strict";n.r(t);var a=n(1),s=n.n(a),c=n(203),o=n.n(c),i=(n(214),n(48)),r=n(10),l=n(17),u=n(33),d=n(5),p=n(6),h=n(49),b=n(13),m=n(12),j=n(59),v=n.n(j),f="0xb343c0aFbD16e0bA00F1EAA05DbF5c5B59EE2438",g=[{inputs:[{internalType:"uint256",name:"id",type:"uint256"},{internalType:"string",name:"comTxt",type:"string"}],name:"addComment",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"postTxt",type:"string"},{internalType:"string",name:"postImg",type:"string"}],name:"addPost",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"uint256",name:"id",type:"uint256"},{internalType:"int8",name:"c",type:"int8"}],name:"changeLike",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"poster",type:"address"},{indexed:!1,internalType:"uint256",name:"id",type:"uint256"},{indexed:!1,internalType:"string",name:"postTxt",type:"string"},{indexed:!1,internalType:"string",name:"postImg",type:"string"}],name:"postCreated",type:"event"},{inputs:[],name:"countPosts",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"id",type:"uint256"}],name:"getPost",outputs:[{internalType:"string",name:"",type:"string"},{internalType:"string",name:"",type:"string"},{internalType:"address",name:"",type:"address"},{internalType:"int8",name:"",type:"int8"},{internalType:"string[]",name:"",type:"string[]"},{internalType:"address[]",name:"",type:"address[]"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"}],x=(n(512),n(3));n(201).config(),console.log("i am here"),console.log(Object({NODE_ENV:"production",PUBLIC_URL:"/miniproject",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_WEB3_API_KEY);var y=function(e){Object(b.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).state={account:"",posts:[],comments:{},socialdapp:null,loading:!0,values:{},cvalues:{},x:"",i:0},a.handleChange=a.handleChange.bind(Object(h.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(h.a)(a)),a.handleCha=a.handleCha.bind(Object(h.a)(a)),a.handleSub=a.handleSub.bind(Object(h.a)(a)),a}return Object(p.a)(n,[{key:"componentWillMount",value:function(){var e=Object(u.a)(Object(l.a)().mark((function e(){return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadWeb3();case 2:return e.next=4,this.loadBlockchainData();case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadWeb3",value:function(){var e=Object(u.a)(Object(l.a)().mark((function e(){return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.ethereum){e.next=6;break}return window.web3=new v.a(window.ethereum),e.next=4,window.ethereum.enable();case 4:e.next=7;break;case 6:window.web3?window.web3=new v.a(window.web3.currentProvider):window.alert("Non-Ethereum browser detected. You should consider trying MetaMask!");case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"loadBlockchainData",value:function(){var e=Object(u.a)(Object(l.a)().mark((function e(){var t,n,a,s,c,o,i,r,u,d;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.web3,e.next=3,t.eth.getAccounts();case 3:return n=e.sent,this.setState({account:n[0]}),e.next=7,t.eth.net.getId();case 7:if(5!==e.sent){e.next=39;break}return a=new t.eth.Contract(g,f),this.setState({socialdapp:a}),e.next=13,a.methods.countPosts().call();case 13:s=e.sent,this.setState({postsCount:s}),console.log(s),console.log(a.methods),c=[],o=0;case 19:if(!(o<s)){e.next=35;break}return e.next=22,a.methods.getPost(o).call();case 22:for(i=e.sent,console.log(i),{},r=[],u=0;u<i[4].length;u++)(d=[])[0]=i[4][u],d[1]=i[5][u],r.push(d);i[6]=r,i[7]=o,console.log(i),c.push(i),console.log(i[6]);case 32:o++,e.next=19;break;case 35:this.setState({posts:c}),console.log(c),e.next=40;break;case 39:window.alert("Decentragram contract not deployed to detected network.");case 40:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addPost",value:function(e){console.log(e),0==e.localeCompare("")&&(e="none");var t="empty post";console.log(e,t),console.log(this.state.socialdapp),this.state.socialdapp.methods.addPost(e,t).send({from:this.state.account}).on("transactionHash",(function(e){console.log(e)}))}},{key:"addComment",value:function(e,t){console.log("commentsinside"),this.state.socialdapp.methods.addComment(parseInt(e),t).send({from:this.state.account}).on("transactionHash",(function(e){console.log(e)}))}},{key:"handleChange",value:function(e){var t=e.target,n=t.name,a=t.value;console.log(a),this.setState((function(e){var t=e.values;return t[n]=a,{values:t}})),console.log(this.state.values)}},{key:"handleCha",value:function(e,t){console.log("insdie"),console.log(e,t.target.value);var n=t.target.value;this.setState((function(t){var a=t.cvalues;return a[e]=n,{cvalues:a}})),console.log(this.state.cvalues)}},{key:"handleSub",value:function(e){var t=Object.keys(this.state.cvalues),n=t[0];0==this.state.cvalues[t].localeCompare("")?alert("empty comment"):(console.log("here"),this.addComment(n,this.state.cvalues[n])),console.log("fck u jalapati"),console.log(this.state.cvalues),e.preventDefault()}},{key:"handleSubmit",value:function(e){0==this.state.values.text.localeCompare("")?alert("empty post"):this.addPost(this.state.values.text),e.preventDefault()}},{key:"newComment",value:function(){var e=Object(u.a)(Object(l.a)().mark((function e(){return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:prompt("What is the comment ?");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return Object(x.jsxs)("div",{className:"container home pt-3 ml-5",style:{height:"100vh"},children:[Object(x.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(x.jsx)("div",{className:"form-group w-75",children:Object(x.jsxs)("label",{for:"post",children:["post",Object(x.jsx)("textarea",{name:"text",className:"form-control w-100",id:"post",rows:"2",onChange:this.handleChange})]})}),Object(x.jsx)("button",{type:"submit",className:"btn btn-primary mb-2",children:"add Post"})]}),this.state.posts.map((function(t){return Object(x.jsxs)("div",{className:"card mt-5 w-100 shadow-lg",children:[Object(x.jsx)("div",{className:"card-header bg-light text-success",children:t[2]}),Object(x.jsx)("div",{className:"card-body",children:Object(x.jsx)("p",{children:t[0]})}),Object(x.jsxs)("div",{className:"card-footer",children:[Object(x.jsx)("p",{className:"fst-italic",children:"comments"}),t[6].map((function(e){return Object(x.jsxs)("div",{className:"card mt-3 w-100",children:[Object(x.jsx)("div",{className:"card-header bg-light text-success",children:e[1]}),Object(x.jsx)("div",{className:"card-body",children:Object(x.jsx)("p",{children:e[0]})})]})})),Object(x.jsx)("div",{children:Object(x.jsxs)("form",{onSubmit:e.handleSub,children:[Object(x.jsx)("div",{className:"form-group w-75",children:Object(x.jsxs)("label",{for:"post",children:["comment:",Object(x.jsx)("input",{type:"text",className:"form-control w-100",onChange:e.handleCha.bind(e,t[7])})]})}),Object(x.jsx)("button",{type:"submit",className:"btn btn-primary mb-2 mt-3",children:"add comment"})]})})]})]})}))]})}}]),n}(a.Component),O=y,w=function(e){Object(b.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).state={account:"",posts:[],loading:!0},a}return Object(p.a)(n,[{key:"componentWillMount",value:function(){var e=Object(u.a)(Object(l.a)().mark((function e(){return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadWeb3();case 2:return e.next=4,this.loadBlockchainData();case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadWeb3",value:function(){var e=Object(u.a)(Object(l.a)().mark((function e(){return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.ethereum){e.next=6;break}return window.web3=new v.a(window.ethereum),e.next=4,window.ethereum.enable();case 4:e.next=7;break;case 6:window.web3?(console.log(window.web3.currentProvider),window.web3=new v.a(window.web3.currentProvider)):window.alert("Non-Ethereum browser detected. You should consider trying MetaMask!");case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"loadBlockchainData",value:function(){var e=Object(u.a)(Object(l.a)().mark((function e(){var t,n,a,s,c,o,i;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.web3,e.next=3,t.eth.getAccounts();case 3:return n=e.sent,console.log(n),this.setState({account:n[0]}),e.next=8,t.eth.net.getId();case 8:if(5!==e.sent){e.next=34;break}return a=new t.eth.Contract(g,f),this.setState({socialdapp:a}),e.next=14,a.methods.countPosts().call();case 14:s=e.sent,this.setState({postsCount:s}),console.log(s),console.log(a.methods),c=[],o=0;case 20:if(!(o<s)){e.next=30;break}return e.next=23,a.methods.getPost(o).call();case 23:i=e.sent,console.log(i),console.log(i[2],this.state.account),i[2]==this.state.account&&c.push(i);case 27:o++,e.next=20;break;case 30:this.setState({posts:c}),console.log(c),e.next=35;break;case 34:window.alert("Decentragram contract not deployed to detected network.");case 35:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return Object(x.jsxs)("div",{className:"container text-left home pt-3",style:{height:"100vh"},children:[this.state.posts.length>0&&this.state.posts.map((function(e){return Object(x.jsxs)("div",{className:"card mt-5 w-100 shadow-lg",children:[Object(x.jsx)("div",{className:"card-header text-success",children:e[2]}),Object(x.jsx)("div",{className:"card-body",children:Object(x.jsx)("p",{children:e[0]})})]})})),0==this.state.posts.length&&Object(x.jsx)("h5",{children:"no posts found"})]})}}]),n}(a.Component),k=w,S=(n.p,n.p+"static/media/socialDapp.a378ebf8.png");n(201).config(),console.log(Object({NODE_ENV:"production",PUBLIC_URL:"/miniproject",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_WEB3_API_KEY),console.log();var C=function(){return Object(x.jsxs)("div",{children:[Object(x.jsx)("nav",{className:"navbar navbar-expand-md navbar-dark bg-dark text-white",children:Object(x.jsxs)("div",{className:"container-fluid",children:[Object(x.jsx)("img",{src:S,width:"30px"}),Object(x.jsx)("a",{className:"navbar-brand",to:"#",children:"Social Dapp"}),Object(x.jsx)("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(x.jsx)("span",{className:"navbar-toggler-icon"})}),Object(x.jsx)("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent",children:Object(x.jsxs)("ul",{className:"navbar-nav ms-auto",children:[Object(x.jsx)("li",{className:"nav-item active",children:Object(x.jsx)(i.b,{className:"nav-link",to:"home",children:"Home"})}),Object(x.jsx)("li",{className:"nav-item",children:Object(x.jsx)(i.b,{className:"nav-link",to:"profile",children:"Profile"})})]})})]})}),Object(x.jsxs)(r.d,{children:[Object(x.jsx)(r.b,{path:"/",element:Object(x.jsx)(r.a,{replace:!0,to:"home"})}),Object(x.jsx)(r.b,{path:"/home",element:Object(x.jsx)(O,{})}),Object(x.jsx)(r.b,{path:"/profile",element:Object(x.jsx)(k,{})})]})]})},T=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,522)).then((function(t){var n=t.getCLS,a=t.getFID,s=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),a(e),s(e),c(e),o(e)}))};n(517);o.a.createRoot(document.getElementById("root")).render(Object(x.jsx)(s.a.StrictMode,{children:Object(x.jsx)(i.a,{children:Object(x.jsx)(C,{})})})),T()}},[[518,1,2]]]);
//# sourceMappingURL=main.d45393f4.chunk.js.map